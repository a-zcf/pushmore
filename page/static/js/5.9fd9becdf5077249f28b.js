webpackJsonp([5],{EtOo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("P9l9"),a={name:"ExchangeSuccess",data:function(){return{giftId:"",show:!1,show1:!1,giftType:"",giftname:"",isDisable:!0,status:""}},mounted:function(){var t=this;this.giftId=this.$route.query.giftId,this.status=this.$route.query.status,document.title="",0!=this.giftId?this.show=!0:this.show=!1,"-2"==this.status||"-1"==this.status?(document.title="领奖",this.show1=!1):(document.title="兑换成功",this.show1=!0),"-1"==this.status?(canvas.style.display="none",this.getScratchPrizeData()):this.$nextTick(function(){var e=document.getElementById("canvas"),s=e.getContext("2d"),i=function(t){var e=0,s=0;return function t(i){e+=i.offsetLeft;s+=i.offsetTop;"BODY"!=i.offsetParent.tagName&&t(i.offsetParent);return[e,s]}(t)}(e),a=i[0],n=i[1];s.beginPath(),s.fillStyle="#ccc",s.fillRect(0,0,e.width,e.height),s.font="20px bold 黑体",s.fillStyle="red",s.textAlign="center",s.textBaseline="middle",s.fillText("开始刮奖",155,80),s.closePath(),document.addEventListener("touchstart",function(){s.beginPath(),s.lineWidth=30,s.globalCompositeOperation="destination-out",s.moveTo(event.touches[0].pageX-a,event.touches[0].pageY-n+25)},!1),document.addEventListener("touchmove",function(){s.lineTo(event.touches[0].pageX-a,event.touches[0].pageY-n+25),s.stroke()}),e.addEventListener("touchstart",function(t){var i;i=(i=function(){for(var t=s.getImageData(0,0,e.width,e.height).data,i=[],a=0;a<t.length;a+=4)t[a+3]<128&&i.push(t[a+3]);return(i.length/(t.length/4)*100).toFixed(2)+"%"}())||0,parseInt(i)>25&&(e.style.display="none",c.getScratchPrizeData())});var c=t})},methods:{getScratchPrizeData:function(){var t=this;this.$postRequest(i.ScratchPrize,{giftId:this.giftId}).then(function(e){if("0000"==e.data.code){var s=e.data.data.gift;t.giftType=s.giftType,t.giftname=s.giftname}})},submAcceptAward:function(){var t=this;0!=this.isDisable&&(this.isDisable=!1,this.$postRequest(i.AcceptAward,{giftId:this.giftId}).then(function(e){t.isDisable=!0,"0000"==e.data.code&&(window.location.href=e.data.data.gift.url)}))}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"exchange-success"},[s("div",{staticClass:"success"},[s("i",{class:"-2"==t.status||"-1"==t.status?"iconfont icon-lipin icon-success":"iconfont icon-chenggong icon-success"}),t._v(" "),s("p",[t._v(t._s("-2"==t.status?"在下方可进行抽奖活动哦":"-1"==t.status?"在下面抽奖区可领取您的奖品哦":"兑换礼品成功")+"\n      ")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"chance-to-draw"},[s("p",{directives:[{name:"show",rawName:"v-show",value:t.show1,expression:"show1"}]},[t._v("恭喜您！额外获得1次抽奖机会")]),t._v(" "),s("div",{staticClass:"scraping-card"},[s("div",{staticClass:"canvas-box"},[s("div",{staticClass:"winning-results",attrs:{id:"prize"}},[""!=t.giftType?s("span",{staticClass:"winres-text"},[t._v("\n                  "+t._s("0"==t.giftType?"恭喜您！获得"+t.giftname:"获得"+t.giftname)+"\n                  ")]):t._e(),t._v(" "),""==t.giftType?s("span",{staticClass:"winres-text"},[t._v("继续刮刮...")]):t._e(),t._v(" "),s("van-button",{staticClass:"winres-but",nativeOn:{click:function(e){return t.submAcceptAward(e)}}},[t._v("领"),s("br"),t._v("奖")])],1),t._v(" "),s("canvas",{attrs:{id:"canvas"}})])])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"exchange-tips"},[e("span",{staticClass:"tips-text"},[this._v("温馨提示：")]),this._v(" "),e("span",{staticClass:"describe-text"},[this._v("1、成条（五份）兑换可获得一次抽奖机会，最高获奖者千元奖励")])])}]};var c=s("VU/8")(a,n,!1,function(t){s("fohY")},null,null);e.default=c.exports},fohY:function(t,e){}});
//# sourceMappingURL=5.9fd9becdf5077249f28b.js.map